{"ast":null,"code":"var _jsxFileName = \"/Users/michaelchang/Desktop/wallet/src/reducers/mainReducer.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport React, { createContext, useCallback, useContext, useReducer } from \"react\";\nimport axios from \"axios\";\nimport { Category } from \"@material-ui/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initState = {\n  labels: [\"test\"],\n  allItems: [] // const newItem = {\n  //   id: allItems.length + 1,\n  //   label: category,\n  //   value: value,\n  //   color: random_rgba(), //\"#\" + Math.floor(Math.random() * 16777215).toString(16),\n  // };\n\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"REMOVE\":\n      const category = action.value.label;\n      const filtered = state.allItems.filter(each => each.category === category)[0];\n      console.log(\"fil\", filtered);\n      const updatedCategoryItems = filtered.items.filter(item => item.id !== action.value.id);\n      let updatedItems = state.allItems.filter(item => item.category !== action.value.label);\n      console.log(\"updatedCategoryItems\", up);\n      console.log(\"all\", updatedCategoryItems); // return {\n      //   ...state,\n      //   allItems: [...updatedItems, updatedCategoryItems],\n      // };\n\n      axios.post(\"http://localhost:4000/users/update-store\", updatedItems).then(res => {\n        console.log(res.data);\n      }).catch(error => {\n        console.log(error);\n      });\n\n      if (updatedCategoryItems.length > 0) {\n        return { ...state,\n          allItems: [...updatedItems, updatedCategoryItems]\n        };\n      } else {\n        return { ...state\n        };\n      }\n\n    case \"ADD_ITEM\":\n      const current = action.value;\n      const itemAlreadyExist = state.allItems.find(item => item.category === action.value.label);\n\n      if (itemAlreadyExist) {\n        itemAlreadyExist.items.push(current);\n        itemAlreadyExist.totalValue += current.value;\n        const updatedItems = state.allItems.filter(item => item.category !== itemAlreadyExist.category);\n        return { ...state,\n          allItems: [...updatedItems, itemAlreadyExist]\n        };\n      }\n\n      const generateColor = () => {\n        return \"#\" + (Math.random().toString(16) + \"000000\").substring(2, 8);\n      };\n\n      const newItem = {\n        category: current.label,\n        totalValue: current.value,\n        items: [current],\n        color: generateColor()\n      };\n      console.log(\"nc\", newItem);\n      axios.post(\"http://localhost:4000/users/add\", newItem).then(res => {\n        console.log(res.data);\n      }).catch(error => {\n        console.log(error);\n      });\n      return { ...state,\n        allItems: [...state.allItems, newItem]\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst initialContext = {\n  state: initState,\n  dispatch: () => {}\n};\nconst MainContext = /*#__PURE__*/createContext(initialContext);\nexport function MainProvider({\n  children\n}) {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initState, undefined);\n  return /*#__PURE__*/_jsxDEV(MainContext.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MainProvider, \"ivzsx5aR9qRFuEtyOcndflQiQ1Q=\");\n\n_c = MainProvider;\nexport const useMainState = () => {\n  _s2();\n\n  const {\n    state,\n    dispatch\n  } = useContext(MainContext);\n  const setLabels = useCallback(value => {\n    dispatch({\n      type: \"ADD\",\n      value\n    });\n  }, [dispatch]);\n  return {\n    labels: state.labels,\n    setLabels\n  };\n};\n\n_s2(useMainState, \"dZNSK8cgMK1H2QVs9aYl6vbAWKc=\");\n\nexport const useAllItemsState = () => {\n  _s3();\n\n  const {\n    state,\n    dispatch\n  } = useContext(MainContext);\n  const setAllItems = useCallback(value => {\n    dispatch({\n      type: \"ADD_ITEM\",\n      value\n    });\n  }, [dispatch]);\n  return {\n    allItems: state.allItems,\n    setAllItems\n  };\n};\n\n_s3(useAllItemsState, \"+9QG0S2p3klEmGfexgPo6hb3weE=\");\n\nexport const useRemoveItem = () => {\n  _s4();\n\n  const {\n    state,\n    dispatch\n  } = useContext(MainContext);\n  const setRemoveItem = useCallback(value => {\n    dispatch({\n      type: \"REMOVE\",\n      value\n    });\n  }, [dispatch]);\n  return {\n    allItems: state.allItems,\n    setRemoveItem\n  };\n};\n\n_s4(useRemoveItem, \"NJon0ieMbYUAejt74t5q5zeSTtU=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"MainProvider\");","map":{"version":3,"sources":["/Users/michaelchang/Desktop/wallet/src/reducers/mainReducer.js"],"names":["React","createContext","useCallback","useContext","useReducer","axios","Category","initState","labels","allItems","reducer","state","action","type","category","value","label","filtered","filter","each","console","log","updatedCategoryItems","items","item","id","updatedItems","up","post","then","res","data","catch","error","length","current","itemAlreadyExist","find","push","totalValue","generateColor","Math","random","toString","substring","newItem","color","initialContext","dispatch","MainContext","MainProvider","children","undefined","useMainState","setLabels","useAllItemsState","setAllItems","useRemoveItem","setRemoveItem"],"mappings":"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","sourcesContent":["import React, {\n  createContext,\n  useCallback,\n  useContext,\n  useReducer,\n} from \"react\";\nimport axios from \"axios\";\nimport { Category } from \"@material-ui/icons\";\n\nconst initState = {\n  labels: [\"test\"],\n  allItems: [],\n  // const newItem = {\n  //   id: allItems.length + 1,\n  //   label: category,\n  //   value: value,\n  //   color: random_rgba(), //\"#\" + Math.floor(Math.random() * 16777215).toString(16),\n  // };\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"REMOVE\":\n      const category = action.value.label;\n      const filtered = state.allItems.filter(\n        (each) => each.category === category\n      )[0];\n      console.log(\"fil\", filtered);\n      const updatedCategoryItems = filtered.items.filter(\n        (item) => item.id !== action.value.id\n      );\n      \n\n      let updatedItems = state.allItems.filter(\n        (item) => item.category !== action.value.label\n      );\n      console.log(\"updatedCategoryItems\", up);\n      console.log(\"all\", updatedCategoryItems);\n\n      // return {\n      //   ...state,\n      //   allItems: [...updatedItems, updatedCategoryItems],\n      // };\n      axios\n        .post(\"http://localhost:4000/users/update-store\", updatedItems)\n        .then((res) => {\n          console.log(res.data);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      if (updatedCategoryItems.length > 0) {\n        return {\n          ...state,\n          allItems: [...updatedItems, updatedCategoryItems],\n        };\n      } else {\n        return {\n          ...state,\n        };\n      }\n\n    case \"ADD_ITEM\":\n      const current = action.value;\n\n      const itemAlreadyExist = state.allItems.find(\n        (item) => item.category === action.value.label\n      );\n      if (itemAlreadyExist) {\n        itemAlreadyExist.items.push(current);\n        itemAlreadyExist.totalValue += current.value;\n\n        const updatedItems = state.allItems.filter(\n          (item) => item.category !== itemAlreadyExist.category\n        );\n\n        return {\n          ...state,\n          allItems: [...updatedItems, itemAlreadyExist],\n        };\n      }\n      const generateColor = () => {\n        return \"#\" + (Math.random().toString(16) + \"000000\").substring(2, 8);\n      };\n\n      const newItem = {\n        category: current.label,\n        totalValue: current.value,\n        items: [current],\n        color: generateColor(),\n      };\n      console.log(\"nc\", newItem);\n      axios\n        .post(\"http://localhost:4000/users/add\", newItem)\n        .then((res) => {\n          console.log(res.data);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      return {\n        ...state,\n\n        allItems: [...state.allItems, newItem],\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst initialContext = {\n  state: initState,\n  dispatch: () => {},\n};\n\nconst MainContext = createContext(initialContext);\n\nexport function MainProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initState, undefined);\n\n  return (\n    <MainContext.Provider value={{ state, dispatch }}>\n      {children}\n    </MainContext.Provider>\n  );\n}\n\nexport const useMainState = () => {\n  const { state, dispatch } = useContext(MainContext);\n\n  const setLabels = useCallback(\n    (value) => {\n      dispatch({ type: \"ADD\", value });\n    },\n    [dispatch]\n  );\n  return { labels: state.labels, setLabels };\n};\n\nexport const useAllItemsState = () => {\n  const { state, dispatch } = useContext(MainContext);\n\n  const setAllItems = useCallback(\n    (value) => {\n      dispatch({ type: \"ADD_ITEM\", value });\n    },\n    [dispatch]\n  );\n  return { allItems: state.allItems, setAllItems };\n};\n\nexport const useRemoveItem = () => {\n  const { state, dispatch } = useContext(MainContext);\n\n  const setRemoveItem = useCallback(\n    (value) => {\n      dispatch({ type: \"REMOVE\", value });\n    },\n    [dispatch]\n  );\n  return { allItems: state.allItems, setRemoveItem };\n};\n"]},"metadata":{},"sourceType":"module"}